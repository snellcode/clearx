{"version":3,"file":"clearx.umd.js","sources":["../src/id.js","../node_modules/deepmerge/dist/umd.js","../node_modules/fast-deep-equal/index.js","../src/object-utils.js","../src/segment-helper.js","../src/segment.js","../src/data-observer.js","../src/clearx.js"],"sourcesContent":["let counter = 0\n\nlet generate = () => {\n  counter += 1\n  return `clearx-${counter}`\n}\n\nexport default generate\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = global || self, global.deepmerge = factory());\n}(this, function () { 'use strict';\n\n\tvar isMergeableObject = function isMergeableObject(value) {\n\t\treturn isNonNullObject(value)\n\t\t\t&& !isSpecial(value)\n\t};\n\n\tfunction isNonNullObject(value) {\n\t\treturn !!value && typeof value === 'object'\n\t}\n\n\tfunction isSpecial(value) {\n\t\tvar stringValue = Object.prototype.toString.call(value);\n\n\t\treturn stringValue === '[object RegExp]'\n\t\t\t|| stringValue === '[object Date]'\n\t\t\t|| isReactElement(value)\n\t}\n\n\t// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\n\tvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\n\tvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\n\tfunction isReactElement(value) {\n\t\treturn value.$$typeof === REACT_ELEMENT_TYPE\n\t}\n\n\tfunction emptyTarget(val) {\n\t\treturn Array.isArray(val) ? [] : {}\n\t}\n\n\tfunction cloneUnlessOtherwiseSpecified(value, options) {\n\t\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t\t: value\n\t}\n\n\tfunction defaultArrayMerge(target, source, options) {\n\t\treturn target.concat(source).map(function(element) {\n\t\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t\t})\n\t}\n\n\tfunction getMergeFunction(key, options) {\n\t\tif (!options.customMerge) {\n\t\t\treturn deepmerge\n\t\t}\n\t\tvar customMerge = options.customMerge(key);\n\t\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n\t}\n\n\tfunction getEnumerableOwnPropertySymbols(target) {\n\t\treturn Object.getOwnPropertySymbols\n\t\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t\t})\n\t\t\t: []\n\t}\n\n\tfunction getKeys(target) {\n\t\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n\t}\n\n\tfunction mergeObject(target, source, options) {\n\t\tvar destination = {};\n\t\tif (options.isMergeableObject(target)) {\n\t\t\tgetKeys(target).forEach(function(key) {\n\t\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t\t});\n\t\t}\n\t\tgetKeys(source).forEach(function(key) {\n\t\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t\t} else {\n\t\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t\t}\n\t\t});\n\t\treturn destination\n\t}\n\n\tfunction deepmerge(target, source, options) {\n\t\toptions = options || {};\n\t\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\t\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\t\tvar sourceIsArray = Array.isArray(source);\n\t\tvar targetIsArray = Array.isArray(target);\n\t\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\t\tif (!sourceAndTargetTypesMatch) {\n\t\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t\t} else if (sourceIsArray) {\n\t\t\treturn options.arrayMerge(target, source, options)\n\t\t} else {\n\t\t\treturn mergeObject(target, source, options)\n\t\t}\n\t}\n\n\tdeepmerge.all = function deepmergeAll(array, options) {\n\t\tif (!Array.isArray(array)) {\n\t\t\tthrow new Error('first argument should be an array')\n\t\t}\n\n\t\treturn array.reduce(function(prev, next) {\n\t\t\treturn deepmerge(prev, next, options)\n\t\t}, {})\n\t};\n\n\tvar deepmerge_1 = deepmerge;\n\n\treturn deepmerge_1;\n\n}));\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","import deepmerge from 'deepmerge'\nimport equal from 'fast-deep-equal'\n\nconst toNumber = (val) => {\n  if (!isNaN(val)) {\n    return val * 1\n  }\n  return val\n}\n\nconst assign = (obj, key, val) => {\n  if (hasEqual(obj[key], val)) return false\n  obj[key] = val\n  return obj[key] === val\n}\n\nexport const freezeObject = (obj) => {\n  if (Object.freeze) Object.freeze(obj)\n  return obj\n}\n\nexport const hasEqual = (obj1, obj2) => {\n  return obj1 !== undefined && equal(obj1, obj2)\n}\n\nexport const split = (path, seperator = '.', escape = '\\\\') => {\n  if (!path) return []\n  if (Array.isArray(path)) return path\n  const keys = []\n  let key = ''\n  for (let i = 0, l = path.length; i < l; ++i) {\n    const charKey = path[i]\n    if ((charKey === seperator) && (path[i - 1] !== escape)) {\n      if (key.length > 0) {\n        keys.push(toNumber(key))\n      }\n      key = ''\n    } else {\n      if (charKey !== escape) {\n        key += path[i]\n      }\n    }\n  }\n  if (key.length > 0) {\n    keys.push(toNumber(key))\n  }\n  return keys\n}\n\nexport const get = (obj, keys, defaultValue) => {\n  if (obj === undefined) return defaultValue\n  if (!keys || keys.length === 0) {\n    return obj\n  }\n  keys = split(keys)\n  let [key, ...remaining] = keys\n  if (!isNaN(key)) {\n    key *= 1\n  }\n  return get(obj[key], remaining, defaultValue)\n}\n\nexport const set = (obj, keys, value, dontReplace) => {\n  let isDataUpdated = false\n\n  if (obj === undefined) return [false, isDataUpdated]\n  if (!keys || keys.length === 0) return [false, isDataUpdated]\n\n  keys = split(keys)\n  const [key, next, ...remaining] = keys\n  if (next !== undefined) {\n    if (!obj.hasOwnProperty(key)) {\n      const val = !isNaN(next) ? [] : {}\n      isDataUpdated = assign(obj, key, val)\n    }\n    const [_, __] = set(obj[key], [next, ...remaining], value, dontReplace)\n    return [_, __ || isDataUpdated]\n  } else {\n    if (obj.hasOwnProperty(key) && dontReplace) return [true, isDataUpdated]\n    isDataUpdated = assign(obj, key, value)\n    return [true, isDataUpdated]\n  }\n}\n\nexport const has = (obj, keys) => {\n  const value = get(obj, keys)\n  if (value === undefined) return false\n  return true\n}\n\nexport const ensureExists = (obj, keys, value = null) => {\n  return set(obj, keys, value, true)\n}\n\nconst arrayMethods = ['push', 'pop', 'splice', 'shift', 'unshift', 'sort', 'slice']\n\nexport const arrayOps = (obj, keys, method, ...args) => {\n  if (arrayMethods.indexOf(method) === -1) return false\n  let arr = get(obj, keys)\n  if (!Array.isArray(arr)) {\n    arr = []\n    set(obj, keys, arr)\n  }\n  let val\n  try {\n    val = arr[method].apply(arr, args)\n  } catch (ex) {\n    // Probably freeze!\n  }\n  return [true, true, val]\n}\n\nexport const push = (obj, keys, ...values) => {\n  return arrayOps(obj, keys, 'push', ...values)\n}\n\nexport const insert = (obj, keys, value, at) => {\n  if (at === undefined) {\n    return push(obj, keys, value)\n  }\n  return arrayOps(obj, keys, 'splice', at, 0, value)\n}\n\nexport const unshift = (obj, keys, ...args) => {\n  return arrayOps(obj, keys, 'unshift', ...args)\n}\n\nexport const pop = (obj, keys) => {\n  return arrayOps(obj, keys, 'pop')\n}\n\nexport const shift = (obj, keys) => {\n  return arrayOps(obj, keys, 'shift')\n}\n\nexport const splice = (obj, keys, ...args) => {\n  return arrayOps(obj, keys, 'splice', ...args)\n}\n\nexport const slice = (obj, keys, ...args) => {\n  const result = arrayOps(obj, keys, 'slice', ...args)\n  return result[2]\n}\n\nexport const sort = (obj, keys, ...args) => {\n  return arrayOps(obj, keys, 'sort', ...args)\n}\n\nexport const increment = (obj, keys, by = 1) => {\n  let val = get(obj, keys) * 1\n  if (isNaN(val)) {\n    val = 0\n  }\n  val += by\n  return set(obj, keys, val)\n}\n\nexport const decrement = (obj, keys, by = 1) => {\n  return increment(obj, keys, by * -1)\n}\n\nexport const toggle = (obj, keys) => {\n  const existing = !!get(obj, keys)\n  return set(obj, keys, !existing)\n}\n\nexport const empty = (obj, keys) => {\n  let isDataUpdated = false\n  const value = get(obj, keys)\n  if (value === undefined) return [true, isDataUpdated]\n  let finalValue\n  switch (true) {\n    case typeof value === 'string':\n      finalValue = ''\n      break\n    case typeof value === 'number':\n      finalValue = 0\n      break\n    case typeof value === 'boolean':\n      finalValue = false\n      break\n    case Array.isArray(value):\n      value.length = 0\n      return [true, value.length === 0]\n    case typeof value === 'object':\n      for (const i in value) {\n        if (value.hasOwnProperty(i)) {\n          isDataUpdated = delete value[i] || isDataUpdated\n        }\n      }\n      return [true, isDataUpdated]\n  }\n  return set(obj, keys, finalValue)\n}\n\nexport const coalesce = (obj, keysArr, defaultValue) => {\n  for (let i = 0, l = keysArr.length; i < l; ++i) {\n    const val = get(obj, keysArr[i])\n    if (val !== undefined && val !== null) {\n      return val\n    }\n  }\n  return defaultValue\n}\n\nexport const del = (obj, keys) => {\n  let isDataUpdated = false\n  if (obj === undefined) return [false, isDataUpdated]\n  if (!keys || keys.length === 0) return [false, isDataUpdated]\n  keys = split(keys)\n  const [key, ...remaining] = keys\n  if (keys.length === 1) {\n    if (Array.isArray(obj) && !isNaN(key)) {\n      const len = obj.length\n      obj.splice(key, 1)\n      isDataUpdated = len !== obj.length\n    } else if (obj.hasOwnProperty(key)) {\n      isDataUpdated = delete obj[key]\n    }\n    return [true, isDataUpdated]\n  } else {\n    return del(obj[key], [...remaining])\n  }\n}\n\nexport const merge = (obj, keys, data) => {\n  ensureExists(obj, keys, Array.isArray(data) ? [] : {})\n  const current = get(obj, keys)\n  const merged = deepmerge(current, data)\n  return set(obj, keys, merged)\n}\n\nexport const isEqual = (obj, keys, data) => {\n  const current = get(obj, keys)\n  return equal(current, data)\n}\n","import { split, freezeObject } from './object-utils'\nimport deepmerge from 'deepmerge'\n\nclass SegmentHelper {\n  constructor (paths, delimiter = '.', store, dataObserver) {\n    this.paths = paths\n    this.delimiter = delimiter\n    this.store = store\n    this.dataObserver = dataObserver\n    this.components = []\n    this._afterUpdateEvents = []\n    this._dataTransformers = []\n  }\n\n  get keys () {\n    const paths = this.paths\n    if (Array.isArray(paths)) return paths\n    let keys = []\n    if (typeof paths === 'string') {\n      keys = [split(paths, this.delimiter)]\n    } else if (paths.toString() === '[object Object]') {\n      for (const key in paths) {\n        if (!paths.hasOwnProperty(key)) continue\n        keys.push(split(paths[key], this.delimiter))\n      }\n    } else {\n      return paths\n    }\n    return keys\n  }\n\n  observe (force) {\n    if (this.components.length === 0 && !force) return\n    if (this.cancelObserver) return\n\n    const observer = this.dataObserver\n    const keys = this.keys\n    const listener = this.updateComponents.bind(this)\n    this.cancelDataListener = observer.attachObserver(keys, listener)\n  }\n\n  unobserve () {\n    if (!this.cancelDataListener) return\n    this.cancelDataListener()\n    delete this.cancelDataListener\n  }\n\n  listenUnmount (component, onUnmount) {\n    if (Array.isArray(component)) return () => {}\n    const componentWillUnmount = component.componentWillUnmount\n    component.componentWillUnmount = () => {\n      onUnmount()\n      if (typeof this.componentWillUnmount === 'function') {\n        this.componentWillUnmount.call(component)\n      }\n    }\n    component.componentWillUnmount.__original = componentWillUnmount\n  }\n\n  unlistenUnmount (component) {\n    const componentWillUnmount = component.componentWillUnmount\n    if (!componentWillUnmount) return\n    const original = component.componentWillUnmount.__original\n    if (!original) return\n    component.componentWillUnmount = original\n  }\n\n  dataTransformer (func) {\n    if (typeof func === 'function') {\n      this._dataTransformers.push(func)\n      this.updateComponents()\n      return () => {\n        const idx = this._dataTransformers.indexOf(func)\n        if (idx > -1) this._dataTransformers.splice(idx, 1)\n      }\n    }\n    return () => {}\n  }\n\n  get dataTransformers () {\n    return this._dataTransformers.slice(0)\n  }\n\n  applyDataTransformers (data) {\n    this._dataTransformers.forEach((func) => {\n      try {\n        data = func(data)\n      } catch (ex) {\n        console.log(func, 'failing to transform', data)\n      }\n    })\n    return data\n  }\n\n  updateData () {\n    let data = {}\n    let paths = this.paths\n\n    if (typeof paths === 'string') {\n      paths = split(paths, this.delimiter)\n      data = this.store.get(paths)\n    } else if (Array.isArray(paths)) {\n      data = paths.map((path) => {\n        const key = split(path, this.delimiter)\n        return this.store.get(key)\n      })\n    } else {\n      for (const key in paths) {\n        const path = split(paths[key], this.delimiter)\n        data[key] = this.store.get(path)\n      }\n    }\n\n    data = this.applyDataTransformers(data)\n\n    if (typeof data === 'object') {\n      data = freezeObject(deepmerge({}, data))\n    }\n\n    this._data = data\n  }\n\n  get data () {\n    if (!this._data) {\n      this.updateData()\n    }\n    return this._data\n  }\n\n  updateComponents () {\n    this.updateData()\n    this.components.forEach((component) => {\n      this.assignState(component)\n    })\n    this.executeAfterUpdate()\n  }\n\n  assignStateFC (component, initialAssignment) {\n    let setState\n    if (Array.isArray(component)) {\n      setState = component[1]\n    }\n    if (!setState) return\n    if (initialAssignment) return true\n    component[0] = this._data\n    setState(this._data)\n    return true\n  }\n\n  assignStateCC (component, initialAssignment) {\n    if (typeof component.setState !== 'function') return\n    if (initialAssignment) {\n      component.state = component.state || {}\n      component.state.store = component.state.store || {}\n      component.state.store = {\n        ...component.state.store,\n        ...this.data\n      }\n    } else {\n      component.setState({\n        ...component.state,\n        store: {\n          ...component.state.store,\n          ...this.data\n        }\n      })\n    }\n    return true\n  }\n\n  assignStateOthers (component) {\n    if (typeof component === 'object') {\n      component.data = this.data\n    }\n  }\n\n  assignState (component, initial = false) {\n    const updatedSC = this.assignStateFC(component, initial)\n    const updatedCC = this.assignStateCC(component, initial)\n    if (!updatedSC && !updatedCC) {\n      this.assignStateOthers(component, initial)\n    }\n  }\n\n  onUpdate (func) {\n    if (typeof func === 'function') {\n      this._afterUpdateEvents.push(func)\n      return () => {\n        const idx = this._afterUpdateEvents.indexOf(func)\n        if (idx > -1) this._afterUpdateEvents.splice(idx, 1)\n      }\n    }\n    return () => {}\n  }\n\n  get afterUpdateEvents () {\n    return this._afterUpdateEvents.slice(0)\n  }\n\n  executeAfterUpdate () {\n    this._afterUpdateEvents.forEach((func) => {\n      try {\n        func(this.data)\n      } catch (ex) {\n        console.log(ex)\n      }\n    })\n  }\n\n  get hasDataListener () {\n    return !!this.cancelDataListener\n  }\n\n  addMark (component, mark) {\n    let comp = component\n    if (Array.isArray(component)) {\n      comp = component[1]\n    }\n    comp.__segment = mark\n  }\n\n  removeMark (component) {\n    let comp = component\n    if (Array.isArray(component)) {\n      comp = component[1]\n    }\n    delete comp.__segment\n  }\n}\n\nexport default SegmentHelper\n","import identifier from './id'\nimport SegmentHelper from './segment-helper'\n\nclass Segment {\n  constructor (paths, id, delimiter, store, dataObserver) {\n    this.id = id || identifier()\n    this.paths = paths\n\n    this._helper = new SegmentHelper(paths, delimiter, store, dataObserver)\n\n    this.delimiter = delimiter\n    this.store = store\n    this.dataObserver = dataObserver\n  }\n\n  findComponent (search) {\n    if (!this._helper) return -1\n    if (Array.isArray(search)) {\n      search = search[1]\n    }\n    const components = this._helper.components\n    for (let i = 0; i < components.length; i++) {\n      let component = components[i]\n      if (Array.isArray(component)) {\n        component = component[1]\n      }\n      if (search === component) {\n        return i\n      }\n    }\n    return -1\n  }\n\n  get data () {\n    if (!this._helper) return {}\n    return this._helper.data\n  }\n\n  get components () {\n    if (!this._helper) return []\n    return this._helper.components.slice(0)\n  }\n\n  get active () {\n    if (!this._helper) return false\n    return this._helper.hasDataListener\n  }\n\n  get afterUpdateEvents () {\n    if (!this._helper) return []\n    return this._helper.afterUpdateEvents\n  }\n\n  get dataTransformers () {\n    if (!this._helper) return []\n    return this._helper.dataTransformers\n  }\n\n  link (component) {\n    if (!component) return {}\n    const helper = this._helper\n    if (!helper) return {}\n    const store = this.store\n    const unlink = store._unlinkComponentFromAllSegments.bind(store, component)\n    const result = [this.data, unlink]\n    if (this.findComponent(component) > -1) return result\n    helper.components.push(component)\n    helper.observe(this.keepSyncing)\n    helper.addMark(component, this)\n    helper.listenUnmount(component, unlink)\n    helper.assignState(component, true)\n    return result\n  }\n\n  unlink (component) {\n    if (!component) return false\n    const helper = this._helper\n    if (!helper) return false\n    const idx = this.findComponent(component)\n    if (idx > -1) {\n      helper.removeMark(component)\n      helper.components.splice(idx, 1)\n      helper.unlistenUnmount(component)\n    }\n    if ((helper.components.length === 0) && !this.keepSyncing) {\n      helper.unobserve()\n    }\n    return idx > -1\n  }\n\n  sync (on = true) {\n    if (!this._helper) return false\n    this.keepSyncing = on\n    if (on && !this.active) {\n      this._helper.observe(true)\n    }\n    if (!on && this.active) {\n      this._helper.unobserve()\n    }\n    return true\n  }\n\n  unlinkAll () {\n    if (!this._helper) return false\n    this._helper.components.forEach(this.unlink.bind(this))\n    return true\n  }\n\n  onUpdate (func) {\n    if (!this._helper) return () => {}\n    return this._helper.onUpdate(func)\n  }\n\n  dataTransformer (func) {\n    if (!this._helper) return () => {}\n    return this._helper.dataTransformer(func)\n  }\n\n  teardown () {\n    if (!this._helper) return true\n    this.unlinkAll()\n    this._helper.unobserve()\n    delete this._helper\n    delete this.dataObserver\n    this.store.removeSegment(this)\n    return true\n  }\n}\n\nexport default Segment\n","import { split } from './object-utils'\nclass DataObserver {\n  constructor (store) {\n    this.store = store\n    this.listeners = {}\n    this.counter = 0\n  }\n\n  attachObserver (keys, listener) {\n    if (!listener) return\n    if (!keys || keys.length === 0) return\n    ++this.counter\n    const id = `data-slice:${this.counter}`\n    this.listeners[id] = {\n      keys,\n      listener\n    }\n    return () => {\n      delete this.listeners[id]\n    }\n  }\n\n  dataUpdatedAt (changedKey) {\n    const seperator = '>>'\n    const targets = []\n    const changedPath = split(changedKey).join(seperator)\n    for (const id in this.listeners) {\n      let { keys, listener } = this.listeners[id]\n      keys = keys.filter((key) => {\n        const keyPath = split(key).join(seperator)\n        return keyPath.startsWith(changedPath) || changedPath.startsWith(keyPath)\n      })\n      if (keys.length > 0) targets.push([keys, listener])\n    }\n    targets.forEach(([keys, listener]) => {\n      try {\n        listener(keys)\n      } catch (ex) {\n        console.log('Error updating', listener, keys)\n      }\n    })\n  }\n\n  teardown () {\n    this.listeners = {}\n  }\n}\nexport default DataObserver\n","import Segment from './segment'\nimport DataObserver from './data-observer'\nimport { sort, get, set, coalesce, empty, insert, push, pop, shift, splice, unshift, ensureExists, del, has, merge, increment, decrement, toggle, isEqual, slice } from './object-utils'\n\nexport class ClearX {\n  constructor (data) {\n    this.data = data\n    this.segments = []\n    this.dataObserver = new DataObserver(this)\n    this.delimiter = '.'\n    this.onUpdateEvents = []\n  }\n\n  triggerEvents (key) {\n    this.dataObserver.dataUpdatedAt(key)\n  }\n\n  executeUtil (key, [status, changed, value]) {\n    if (changed) {\n      this.triggerEvents(key)\n    }\n    this.executeOnUpdateEvents(changed, key)\n    return status\n  }\n\n  get (key, defaultValue) {\n    return get(this.data, key, defaultValue)\n  }\n\n  set (key, value, doNotReplace = false) {\n    return this.executeUtil(key, set(this.data, key, value, doNotReplace))\n  }\n\n  coalesce (keys, defaultValue) {\n    return coalesce(this.data, keys, defaultValue)\n  }\n\n  empty (key) {\n    return this.executeUtil(key, empty(this.data, key))\n  }\n\n  insert (key, value, position) {\n    return this.executeUtil(key, insert(this.data, key, value, position))\n  }\n\n  push (key, ...values) {\n    return this.executeUtil(key, push(this.data, key, ...values))\n  }\n\n  unshift (key, ...values) {\n    return this.executeUtil(key, unshift(this.data, key, ...values))\n  }\n\n  pop (key) {\n    return this.executeUtil(key, pop(this.data, key))\n  }\n\n  shift (key) {\n    return this.executeUtil(key, shift(this.data, key))\n  }\n\n  splice (key, ...args) {\n    return this.executeUtil(key, splice(this.data, key, ...args))\n  }\n\n  slice (key, ...args) {\n    return slice(this.data, key, ...args)\n  }\n\n  sort (key, ...args) {\n    return this.executeUtil(key, sort(this.data, key, ...args))\n  }\n\n  ensureExists (key, defaultValue) {\n    return this.executeUtil(key, ensureExists(this.data, key, defaultValue))\n  }\n\n  delete (key) {\n    return this.executeUtil(key, del(this.data, key))\n  }\n\n  has (key) {\n    return has(this.data, key)\n  }\n\n  merge (key, data) {\n    return this.executeUtil(key, merge(this.data, key, data))\n  }\n\n  increment (key, by) {\n    return this.executeUtil(key, increment(this.data, key, by))\n  }\n\n  decrement (key, by) {\n    return this.executeUtil(key, decrement(this.data, key, by))\n  }\n\n  toggle (key) {\n    return this.executeUtil(key, toggle(this.data, key))\n  }\n\n  isEqual (key, value) {\n    return isEqual(this.data, key, value)\n  }\n\n  paths (keys, id) {\n    const segment = new Segment(keys, id, this.delimiter, this, this.dataObserver)\n    this.segments.push(segment)\n    return segment\n  }\n\n  bind (options = {}) {\n    const { to, afterUpdate, id, paths, dataTransformer } = options\n    let component = to\n    if (Array.isArray(component)) {\n      component = to[1]\n    }\n    let segment\n    segment = component.__segment\n    if (segment) {\n      return segment.link(to)\n    }\n    segment = this.paths(paths, id, this.delimiter)\n    segment.onUpdate(afterUpdate)\n    segment.dataTransformer(dataTransformer)\n    const link = segment.link(to)\n\n    if (Array.isArray(to)) {\n      return link\n    }\n    return segment\n  }\n\n  removeSegment (segment) {\n    const index = this.segments.indexOf(segment)\n    if (index > -1) {\n      segment.teardown()\n      this.segments.splice(index, 1)\n      return true\n    }\n    return false\n  }\n\n  onUpdate (func) {\n    if (typeof func === 'function') {\n      this.onUpdateEvents.push(func)\n      return () => {\n        const idx = this.onUpdateEvents.indexOf(func)\n        if (idx > -1) this.onUpdateEvents.splice(idx, 1)\n      }\n    }\n    return () => {}\n  }\n\n  executeOnUpdateEvents (changed, changedKeys) {\n    this.onUpdateEvents.forEach((func) => {\n      try {\n        func(changed, changedKeys, this.data, this)\n      } catch (ex) {\n        console.log('onUpdate', func, changedKeys)\n      }\n    })\n  }\n\n  _unlinkComponentFromAllSegments (component) {\n    this.segments.forEach((segment) => {\n      segment.unlink(component)\n    })\n  }\n\n  teardown () {\n    this.segments.forEach((segment) => {\n      segment.teardown()\n    })\n    this.dataObserver.teardown()\n    delete this.dataObserver\n    this.data = {}\n    return true\n  }\n}\n\n"],"names":["counter","generate","global","factory","module","this","isNonNullObject","value","isSpecial","stringValue","Object","prototype","toString","call","isReactElement","$$typeof","REACT_ELEMENT_TYPE","emptyTarget","val","Array","isArray","cloneUnlessOtherwiseSpecified","options","clone","isMergeableObject","deepmerge","defaultArrayMerge","target","source","concat","map","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getKeys","keys","mergeObject","destination","forEach","arrayMerge","sourceIsArray","targetIsArray","canUseSymbol","Symbol","for","all","array","Error","reduce","prev","next","keyList","hasProp","hasOwnProperty","equal","a","b","i","length","arrA","arrB","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","toNumber","isNaN","assign","obj","hasEqual","freezeObject","freeze","obj1","obj2","split","path","seperator","escape","l","charKey","push","get","defaultValue","remaining","set","dontReplace","isDataUpdated","_","__","has","ensureExists","arrayMethods","arrayOps","method","args","indexOf","arr","apply","ex","values","insert","at","unshift","pop","shift","splice","slice","result","sort","increment","by","decrement","toggle","existing","empty","finalValue","coalesce","keysArr","del","len","merge","data","current","merged","isEqual","SegmentHelper","constructor","paths","delimiter","store","dataObserver","components","_afterUpdateEvents","_dataTransformers","observe","force","cancelObserver","observer","listener","updateComponents","bind","cancelDataListener","attachObserver","unobserve","listenUnmount","component","onUnmount","componentWillUnmount","__original","unlistenUnmount","original","dataTransformer","func","idx","dataTransformers","applyDataTransformers","console","log","updateData","_data","assignState","executeAfterUpdate","assignStateFC","initialAssignment","setState","assignStateCC","state","assignStateOthers","initial","updatedSC","updatedCC","onUpdate","afterUpdateEvents","hasDataListener","addMark","mark","comp","__segment","removeMark","Segment","id","identifier","_helper","findComponent","search","active","link","helper","unlink","_unlinkComponentFromAllSegments","keepSyncing","sync","on","unlinkAll","teardown","removeSegment","DataObserver","listeners","dataUpdatedAt","changedKey","targets","changedPath","join","keyPath","startsWith","segments","onUpdateEvents","triggerEvents","executeUtil","status","changed","executeOnUpdateEvents","doNotReplace","position","delete","segment","to","afterUpdate","index","changedKeys"],"mappings":"wNAAIA,CAAAA,CAAO,CAAG,EAEVC,CAAQ,CAAG,KACbD,CAAO,EAAI,CADE,CAEL,UAASA,CAAQ,EAFZ,mOCFd,UAAUE,CAAV,CAAkBC,CAAlB,CAA2B,CACoCC,SAAA,CAAiBD,CAAO,EAGvF,CAJA,EAICE,CAJD,CAIO,UAAY,CAOnB,QAASC,CAAAA,CAAT,CAAyBC,CAAzB,CAAgC,CAC/B,MAAO,CAAC,CAACA,CAAF,EAA4B,QAAjB,QAAOA,CAAAA,CACzB,CAED,QAASC,CAAAA,CAAT,CAAmBD,CAAnB,CAA0B,CACzB,GAAIE,CAAAA,CAAW,CAAGC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,CAA/B,CAAlB,CAEA,MAAuB,iBAAhB,GAAAE,CAAW,EACE,eAAhB,GAAAA,CADG,EAEHK,CAAc,CAACP,CAAD,CAClB;AAMD,QAASO,CAAAA,CAAT,CAAwBP,CAAxB,CAA+B,CAC9B,MAAOA,CAAAA,CAAK,CAACQ,QAAN,GAAmBC,CAC1B,CAED,QAASC,CAAAA,CAAT,CAAqBC,CAArB,CAA0B,CACzB,MAAOC,CAAAA,KAAK,CAACC,OAAN,CAAcF,CAAd,EAAqB,EAArB,CAA0B,EACjC,CAED,QAASG,CAAAA,CAAT,CAAuCd,CAAvC,CAA8Ce,CAA9C,CAAuD,CACtD,MAAQ,KAAAA,CAAO,CAACC,KAAR,EAA2BD,CAAO,CAACE,iBAAR,CAA0BjB,CAA1B,CAA5B,CACJkB,CAAS,CAACR,CAAW,CAACV,CAAD,CAAZ,CAAqBA,CAArB,CAA4Be,CAA5B,CADL,CAEJf,CACH,CAED,QAASmB,CAAAA,CAAT,CAA2BC,CAA3B,CAAmCC,CAAnC,CAA2CN,CAA3C,CAAoD,CACnD,MAAOK,CAAAA,CAAM,CAACE,MAAP,CAAcD,CAAd,EAAsBE,GAAtB,CAA0B,SAASC,CAAT,CAAkB,CAClD,MAAOV,CAAAA,CAA6B,CAACU,CAAD,CAAUT,CAAV,CACpC,CAFM,CAGP,CAED,QAASU,CAAAA,CAAT,CAA0BC,CAA1B,CAA+BX,CAA/B,CAAwC,CACvC,GAAI,CAACA,CAAO,CAACY,WAAb,CACC,MAAOT,CAAAA,CAAP,CAED,GAAIS,CAAAA,CAAW,CAAGZ,CAAO,CAACY,WAAR,CAAoBD,CAApB,CAAlB,CACA,MAA8B,UAAvB,QAAOC,CAAAA,CAAP,CAAoCA,CAApC,CAAkDT,CACzD,CAED,QAASU,CAAAA,CAAT,CAAyCR,CAAzC,CAAiD,CAChD,MAAOjB,CAAAA,MAAM,CAAC0B,qBAAP,CACJ1B,MAAM,CAAC0B,qBAAP,CAA6BT,CAA7B,EAAqCU,MAArC,CAA4C,SAASC,CAAT,CAAiB,CAC9D,MAAOX,CAAAA,CAAM,CAACY,oBAAP,CAA4BD,CAA5B,CACP,CAFC,CADI,CAIJ,EACH,CAED,QAASE,CAAAA,CAAT,CAAiBb,CAAjB,CAAyB,CACxB,MAAOjB,CAAAA,MAAM,CAAC+B,IAAP,CAAYd,CAAZ,EAAoBE,MAApB,CAA2BM,CAA+B,CAACR,CAAD,CAA1D,CACP,CAED,QAASe,CAAAA,CAAT,CAAqBf,CAArB,CAA6BC,CAA7B,CAAqCN,CAArC,CAA8C,CAC7C,GAAIqB,CAAAA,CAAW,CAAG,EAAlB,CAaA,MAZIrB,CAAAA,CAAO,CAACE,iBAAR,CAA0BG,CAA1B,CAYJ,EAXCa,CAAO,CAACb,CAAD,CAAP,CAAgBiB,OAAhB,CAAwB,SAASX,CAAT,CAAc,CACrCU,CAAW,CAACV,CAAD,CAAX,CAAmBZ,CAA6B,CAACM,CAAM,CAACM,CAAD,CAAP,CAAcX,CAAd,CAChD,CAFD,CAWD,CAPAkB,CAAO,CAACZ,CAAD,CAAP,CAAgBgB,OAAhB,CAAwB,SAASX,CAAT,CAAc,CAIpCU,CAAW,CAACV,CAAD,CAJyB,CAChCX,CAAO,CAACE,iBAAR,CAA0BI,CAAM,CAACK,CAAD,CAAhC,CAAD,EAA4CN,CAAM,CAACM,CAAD,CADjB,CAIjBD,CAAgB,CAACC,CAAD,CAAMX,CAAN,CAAhB,CAA+BK,CAAM,CAACM,CAAD,CAArC,CAA4CL,CAAM,CAACK,CAAD,CAAlD,CAAyDX,CAAzD,CAJiB,CAEjBD,CAA6B,CAACO,CAAM,CAACK,CAAD,CAAP,CAAcX,CAAd,CAIjD,CAND,CAOA,CAAOqB,CACP,CAED,QAASlB,CAAAA,CAAT,CAAmBE,CAAnB,CAA2BC,CAA3B,CAAmCN,CAAnC,CAA4C,CAC3CA,CAAO,CAAGA,CAAO,EAAI,EADsB,CAE3CA,CAAO,CAACuB,UAAR,CAAqBvB,CAAO,CAACuB,UAAR,EAAsBnB,CAFA,CAG3CJ,CAAO,CAACE,iBAAR,CAA4BF,CAAO,CAACE,iBAAR,EAA6BA,CAHd,IAKvCsB,CAAAA,CAAa,CAAG3B,KAAK,CAACC,OAAN,CAAcQ,CAAd,CALuB,CAMvCmB,CAAa,CAAG5B,KAAK,CAACC,OAAN,CAAcO,CAAd,CANuB,OAOXmB,CAAAA,CAAa,GAAKC,CAPP,CAWhCD,CAXgC,CAYnCxB,CAAO,CAACuB,UAAR,CAAmBlB,CAAnB,CAA2BC,CAA3B,CAAmCN,CAAnC,CAZmC,CAcnCoB,CAAW,CAACf,CAAD,CAASC,CAAT,CAAiBN,CAAjB,CAdwB,CAUnCD,CAA6B,CAACO,CAAD,CAASN,CAAT,CAMrC,CAhGkB,GAEfE,CAAAA,CAAiB,CAAG,SAA2BjB,CAA3B,CAAkC,CACzD,MAAOD,CAAAA,CAAe,CAACC,CAAD,CAAf,EACH,CAACC,CAAS,CAACD,CAAD,CACd,CALkB,CAoBfyC,CAAY,CAAqB,UAAlB,QAAOC,CAAAA,MAAP,EAAgCA,MAAM,CAACC,GApBvC,CAqBflC,CAAkB,CAAGgC,CAAY,CAAGC,MAAM,CAACC,GAAP,CAAW,eAAX,CAAH,CAAiC,KArBnD,CAkGnBzB,CAAS,CAAC0B,GAAV,CAAgB,SAAsBC,CAAtB,CAA6B9B,CAA7B,CAAsC,CACrD,GAAI,CAACH,KAAK,CAACC,OAAN,CAAcgC,CAAd,CAAL,CACC,KAAM,IAAIC,CAAAA,KAAJ,CAAU,mCAAV,CAAN,CAGD,MAAOD,CAAAA,CAAK,CAACE,MAAN,CAAa,SAASC,CAAT,CAAeC,CAAf,CAAqB,CACxC,MAAO/B,CAAAA,CAAS,CAAC8B,CAAD,CAAOC,CAAP,CAAalC,CAAb,CAChB,CAFM,CAEJ,EAFI,CAGP,CA1GkB,CA8GnB,MAFkBG,CAAAA,CAIlB,CApHA,ICEGL,CAAO,CAAGD,KAAK,CAACC,QAChBqC,CAAO,CAAG/C,MAAM,CAAC+B,KACjBiB,CAAO,CAAGhD,MAAM,CAACC,SAAP,CAAiBgD,gBAEjB,CAAG,QAASC,CAAAA,CAAT,CAAeC,CAAf,CAAkBC,CAAlB,CAAqB,CACpC,GAAID,CAAC,GAAKC,CAAV,CAAa,SAEb,GAAID,CAAC,EAAIC,CAAL,EAAsB,QAAZ,QAAOD,CAAAA,CAAjB,EAA8C,QAAZ,QAAOC,CAAAA,CAA7C,CAA4D,CAC1D,GAEIC,CAAAA,CAFJ,CAGIC,CAHJ,CAII/B,CAJJ,CAAIgC,CAAI,CAAG7C,CAAO,CAACyC,CAAD,CAAlB,CACIK,CAAI,CAAG9C,CAAO,CAAC0C,CAAD,CADlB,CAMA,GAAIG,CAAI,EAAIC,CAAZ,CAAkB,CAEhB,GADAF,CAAM,CAAGH,CAAC,CAACG,MACX,CAAIA,CAAM,EAAIF,CAAC,CAACE,MAAhB,CAAwB,SACxB,IAAKD,CAAC,CAAGC,CAAT,CAAyB,CAAR,EAAAD,CAAC,EAAlB,EACE,GAAI,CAACH,CAAK,CAACC,CAAC,CAACE,CAAD,CAAF,CAAOD,CAAC,CAACC,CAAD,CAAR,CAAV,CAAwB,SAC1B,QACD,CAED,GAAIE,CAAI,EAAIC,CAAZ,CAAkB,SAElB,GAAIC,CAAAA,CAAK,CAAGN,CAAC,WAAYO,CAAAA,IAAzB,CACIC,CAAK,CAAGP,CAAC,WAAYM,CAAAA,IADzB,CAEA,GAAID,CAAK,EAAIE,CAAb,CAAoB,SACpB,GAAIF,CAAK,EAAIE,CAAb,CAAoB,MAAOR,CAAAA,CAAC,CAACS,OAAF,IAAeR,CAAC,CAACQ,OAAF,EAAtB,CAEpB,GAAIC,CAAAA,CAAO,CAAGV,CAAC,WAAYW,CAAAA,MAA3B,CACIC,CAAO,CAAGX,CAAC,WAAYU,CAAAA,MAD3B,CAEA,GAAID,CAAO,EAAIE,CAAf,CAAwB,SACxB,GAAIF,CAAO,EAAIE,CAAf,CAAwB,MAAOZ,CAAAA,CAAC,CAACjD,QAAF,IAAgBkD,CAAC,CAAClD,QAAF,EAAvB,CAExB,GAAI6B,CAAAA,CAAI,CAAGgB,CAAO,CAACI,CAAD,CAAlB,CAGA,GAFAG,CAAM,CAAGvB,CAAI,CAACuB,MAEd,CAAIA,CAAM,GAAKP,CAAO,CAACK,CAAD,CAAP,CAAWE,MAA1B,CACE,SAEF,IAAKD,CAAC,CAAGC,CAAT,CAAyB,CAAR,EAAAD,CAAC,EAAlB,EACE,GAAI,CAACL,CAAO,CAAC7C,IAAR,CAAaiD,CAAb,CAAgBrB,CAAI,CAACsB,CAAD,CAApB,CAAL,CAA+B,SAEjC,IAAKA,CAAC,CAAGC,CAAT,CAAyB,CAAR,EAAAD,CAAC,EAAlB,EAEE,GADA9B,CAAG,CAAGQ,CAAI,CAACsB,CAAD,CACV,CAAI,CAACH,CAAK,CAACC,CAAC,CAAC5B,CAAD,CAAF,CAAS6B,CAAC,CAAC7B,CAAD,CAAV,CAAV,CAA4B,SAG9B,QACD,CAED,MAAO4B,CAAAA,CAAC,GAAGA,CAAJ,EAASC,CAAC,GAAGA,CACrB,OCnDKY,CAAAA,CAAQ,CAAIxD,CAAD,EACVyD,KAAK,CAACzD,CAAD,CADK,CAIRA,CAJQ,CAEA,CAAN,CAAAA,EAKL0D,CAAM,CAAG,CAACC,CAAD,CAAM5C,CAAN,CAAWf,CAAX,IACT4D,CAAQ,CAACD,CAAG,CAAC5C,CAAD,CAAJ,CAAWf,CAAX,CADC,GAEb2D,CAAG,CAAC5C,CAAD,CAAH,CAAWf,CAFE,CAGN2D,CAAG,CAAC5C,CAAD,CAAH,GAAaf,CAHP,EAMF6D,CAAY,CAAIF,CAAD,GACtBnE,MAAM,CAACsE,MADe,EACPtE,MAAM,CAACsE,MAAP,CAAcH,CAAd,CADO,CAEnBA,CAFmB,EAKfC,CAAQ,CAAG,CAACG,CAAD,CAAOC,CAAP,GACf,SAAAD,CAAI,EAAkBrB,CAAK,CAACqB,CAAD,CAAOC,CAAP,EAGvBC,CAAK,CAAG,CAACC,CAAD,CAAOC,CAAS,CAAG,GAAnB,CAAwBC,CAAM,CAAG,IAAjC,GAA0C,CAC7D,GAAI,CAACF,CAAL,CAAW,MAAO,EAAP,CACX,GAAIjE,KAAK,CAACC,OAAN,CAAcgE,CAAd,CAAJ,CAAyB,MAAOA,CAAAA,CAAP,CACzB,KAAM3C,CAAAA,CAAI,CAAG,EAAb,CACA,GAAIR,CAAAA,CAAG,CAAG,EAAV,CACA,IAAK,GAAI8B,CAAAA,CAAC,CAAG,CAAR,CAAWwB,CAAC,CAAGH,CAAI,CAACpB,MAAzB,CAAiCD,CAAC,CAAGwB,CAArC,CAAwC,EAAExB,CAA1C,CAA6C,CAC3C,KAAMyB,CAAAA,CAAO,CAAGJ,CAAI,CAACrB,CAAD,CAApB,CACKyB,CAAO,GAAKH,CAAb,EAA4BD,CAAI,CAACrB,CAAC,CAAG,CAAL,CAAJ,GAAgBuB,CAFL,EAGxB,CAAb,CAAArD,CAAG,CAAC+B,MAHiC,EAIvCvB,CAAI,CAACgD,IAAL,CAAUf,CAAQ,CAACzC,CAAD,CAAlB,CAJuC,CAMzCA,CAAG,CAAG,EANmC,EAQrCuD,CAAO,GAAKF,CARyB,GASvCrD,CAAG,EAAImD,CAAI,CAACrB,CAAD,CAT4B,CAY5C,CAID,MAHiB,EAAb,CAAA9B,CAAG,CAAC+B,MAGR,EAFEvB,CAAI,CAACgD,IAAL,CAAUf,CAAQ,CAACzC,CAAD,CAAlB,CAEF,CAAOQ,GAGIiD,CAAG,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAYkD,CAAZ,GAA6B,CAC9C,GAAI,SAAAd,CAAJ,CAAuB,MAAOc,CAAAA,CAAP,CACvB,GAAI,CAAClD,CAAD,EAAyB,CAAhB,GAAAA,CAAI,CAACuB,MAAlB,CACE,MAAOa,CAAAA,CAAP,CAEFpC,CAAI,CAAG0C,CAAK,CAAC1C,CAAD,CALkC,CAM9C,GAAI,CAACR,CAAD,CAAM,GAAG2D,CAAT,EAAsBnD,CAA1B,CAIA,MAHKkC,CAAAA,KAAK,CAAC1C,CAAD,CAGV,GAFEA,CAAG,EAAI,CAET,EAAOyD,CAAG,CAACb,CAAG,CAAC5C,CAAD,CAAJ,CAAW2D,CAAX,CAAsBD,CAAtB,GAGCE,CAAG,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAYlC,CAAZ,CAAmBuF,CAAnB,GAAmC,CACpD,GAAIC,CAAAA,CAAa,GAAjB,CAEA,GAAIlB,CAAG,SAAP,CAAuB,MAAO,IAAQkB,CAAR,CAAP,CACvB,GAAI,CAACtD,CAAD,EAAyB,CAAhB,GAAAA,CAAI,CAACuB,MAAlB,CAAgC,MAAO,IAAQ+B,CAAR,CAAP,CAEhCtD,CAAI,CAAG0C,CAAK,CAAC1C,CAAD,CANwC,CAOpD,KAAM,CAACR,CAAD,CAAMuB,CAAN,CAAY,GAAGoC,CAAf,EAA4BnD,CAAlC,CACA,GAAI,SAAAe,CAAJ,CAAwB,CACtB,GAAI,CAACqB,CAAG,CAAClB,cAAJ,CAAmB1B,CAAnB,CAAL,CAA8B,CAC5B,KAAMf,CAAAA,CAAG,CAAIyD,KAAK,CAACnB,CAAD,CAAN,CAAoB,EAApB,CAAe,EAA3B,CACAuC,CAAa,CAAGnB,CAAM,CAACC,CAAD,CAAM5C,CAAN,CAAWf,CAAX,CACvB,CACD,KAAM,CAAC8E,CAAD,CAAIC,CAAJ,EAAUJ,CAAG,CAAChB,CAAG,CAAC5C,CAAD,CAAJ,CAAW,CAACuB,CAAD,CAAO,GAAGoC,CAAV,CAAX,CAAiCrF,CAAjC,CAAwCuF,CAAxC,CAAnB,CACA,MAAO,CAACE,CAAD,CAAIC,CAAE,EAAIF,CAAV,CACR,CAfmD,MAgB9ClB,CAAAA,CAAG,CAAClB,cAAJ,CAAmB1B,CAAnB,GAA2B6D,CAhBmB,CAgBC,IAAOC,CAAP,CAhBD,EAiBlDA,CAAa,CAAGnB,CAAM,CAACC,CAAD,CAAM5C,CAAN,CAAW1B,CAAX,CAjB4B,CAkB3C,IAAOwF,CAAP,CAlB2C,GAsBzCG,CAAG,CAAG,CAACrB,CAAD,CAAMpC,CAAN,GAAe,CAChC,KAAMlC,CAAAA,CAAK,CAAGmF,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAjB,CADgC,MAE5B,UAAAlC,GAIO4F,CAAY,CAAG,CAACtB,CAAD,CAAMpC,CAAN,CAAYlC,CAAK,CAAG,IAApB,GACnBsF,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAYlC,CAAZ,KAGN6F,CAAY,CAAG,CAAC,MAAD,CAAS,KAAT,CAAgB,QAAhB,CAA0B,OAA1B,CAAmC,SAAnC,CAA8C,MAA9C,CAAsD,OAAtD,EAERC,CAAQ,CAAG,CAACxB,CAAD,CAAMpC,CAAN,CAAY6D,CAAZ,CAAoB,GAAGC,CAAvB,GAAgC,CACtD,GAAqC,CAAC,CAAlC,GAAAH,CAAY,CAACI,OAAb,CAAqBF,CAArB,CAAJ,CAAyC,SACzC,GAAIG,CAAAA,CAAG,CAAGf,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAb,CACKtB,KAAK,CAACC,OAAN,CAAcqF,CAAd,CAHiD,GAIpDA,CAAG,CAAG,EAJ8C,CAKpDZ,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAYgE,CAAZ,CALiD,EAOtD,GAAIvF,CAAAA,CAAJ,CACA,GAAI,CACFA,CAAG,CAAGuF,CAAG,CAACH,CAAD,CAAH,CAAYI,KAAZ,CAAkBD,CAAlB,CAAuBF,CAAvB,CACP,CAAC,MAAOI,CAAP,CAAW;AAEZ,CACD,MAAO,OAAazF,CAAb,GAGIuE,CAAI,CAAG,CAACZ,CAAD,CAAMpC,CAAN,CAAY,GAAGmE,CAAf,GACXP,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,MAAZ,CAAoB,GAAGmE,CAAvB,EAGJC,CAAM,CAAG,CAAChC,CAAD,CAAMpC,CAAN,CAAYlC,CAAZ,CAAmBuG,CAAnB,GAChB,SAAAA,CADgB,CAEXrB,CAAI,CAACZ,CAAD,CAAMpC,CAAN,CAAYlC,CAAZ,CAFO,CAIb8F,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,QAAZ,CAAsBqE,CAAtB,CAA0B,CAA1B,CAA6BvG,CAA7B,EAGJwG,CAAO,CAAG,CAAClC,CAAD,CAAMpC,CAAN,CAAY,GAAG8D,CAAf,GACdF,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,SAAZ,CAAuB,GAAG8D,CAA1B,EAGJS,CAAG,CAAG,CAACnC,CAAD,CAAMpC,CAAN,GACV4D,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,KAAZ,EAGJwE,CAAK,CAAG,CAACpC,CAAD,CAAMpC,CAAN,GACZ4D,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,OAAZ,EAGJyE,CAAM,CAAG,CAACrC,CAAD,CAAMpC,CAAN,CAAY,GAAG8D,CAAf,GACbF,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,QAAZ,CAAsB,GAAG8D,CAAzB,EAGJY,CAAK,CAAG,CAACtC,CAAD,CAAMpC,CAAN,CAAY,GAAG8D,CAAf,GAAwB,CAC3C,KAAMa,CAAAA,CAAM,CAAGf,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,OAAZ,CAAqB,GAAG8D,CAAxB,CAAvB,CACA,MAAOa,CAAAA,CAAM,CAAC,CAAD,GAGFC,CAAI,CAAG,CAACxC,CAAD,CAAMpC,CAAN,CAAY,GAAG8D,CAAf,GACXF,CAAQ,CAACxB,CAAD,CAAMpC,CAAN,CAAY,MAAZ,CAAoB,GAAG8D,CAAvB,EAGJe,CAAS,CAAG,CAACzC,CAAD,CAAMpC,CAAN,CAAY8E,CAAE,CAAG,CAAjB,GAAuB,CAC9C,GAAIrG,CAAAA,CAAG,CAAoB,CAAjB,CAAAwE,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAb,CAKA,MAJIkC,CAAAA,KAAK,CAACzD,CAAD,CAIT,GAHEA,CAAG,CAAG,CAGR,EADAA,CAAG,EAAIqG,CACP,CAAO1B,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAYvB,CAAZ,GAGCsG,CAAS,CAAG,CAAC3C,CAAD,CAAMpC,CAAN,CAAY8E,CAAE,CAAG,CAAjB,GAChBD,CAAS,CAACzC,CAAD,CAAMpC,CAAN,CAAiB,CAAC,CAAN,CAAA8E,CAAZ,EAGLE,CAAM,CAAG,CAAC5C,CAAD,CAAMpC,CAAN,GAAe,CACnC,KAAMiF,CAAAA,CAAQ,CAAG,CAAC,CAAChC,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAtB,CACA,MAAOoD,CAAAA,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAY,CAACiF,CAAb,GAGCC,CAAK,CAAG,CAAC9C,CAAD,CAAMpC,CAAN,GAAe,CAClC,GAAIsD,CAAAA,CAAa,GAAjB,CACA,KAAMxF,CAAAA,CAAK,CAAGmF,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAjB,CACA,GAAIlC,CAAK,SAAT,CAAyB,MAAO,IAAOwF,CAAP,CAAP,CACzB,GAAI6B,CAAAA,CAAJ,CACA,WACE,IAAsB,QAAjB,QAAOrH,CAAAA,CAAZ,CACEqH,CAAU,CAAG,EADf,CAEE,MACF,IAAsB,QAAjB,QAAOrH,CAAAA,CAAZ,CACEqH,CAAU,CAAG,CADf,CAEE,MACF,IAAsB,SAAjB,QAAOrH,CAAAA,CAAZ,CACEqH,CAAU,GADZ,CAEE,MACF,IAAKzG,CAAAA,KAAK,CAACC,OAAN,CAAcb,CAAd,CAAL,CAEE,MADAA,CAAAA,CAAK,CAACyD,MAAN,CAAe,CACf,CAAO,IAAwB,CAAjB,GAAAzD,CAAK,CAACyD,MAAb,CAAP,CACF,IAAsB,QAAjB,QAAOzD,CAAAA,CAAZ,CACE,IAAK,KAAMwD,CAAAA,CAAX,GAAgBxD,CAAAA,CAAhB,CACMA,CAAK,CAACoD,cAAN,CAAqBI,CAArB,CADN,GAEIgC,CAAa,CAAG,MAAOxF,CAAAA,CAAK,CAACwD,CAAD,CAAZ,EAAmBgC,CAFvC,EAKA,MAAO,IAAOA,CAAP,CAAP,CAnBJ,CAqBA,MAAOF,CAAAA,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAYmF,CAAZ,GAGCC,CAAQ,CAAG,CAAChD,CAAD,CAAMiD,CAAN,CAAenC,CAAf,GAAgC,CACtD,IAAK,GAAI5B,CAAAA,CAAC,CAAG,CAAR,CAAWwB,CAAC,CAAGuC,CAAO,CAAC9D,MAA5B,CAAoCD,CAAC,CAAGwB,CAAxC,CAA2C,EAAExB,CAA7C,CAAgD,CAC9C,KAAM7C,CAAAA,CAAG,CAAGwE,CAAG,CAACb,CAAD,CAAMiD,CAAO,CAAC/D,CAAD,CAAb,CAAf,CACA,GAAI7C,CAAG,SAAH,EAA6B,IAAR,GAAAA,CAAzB,CACE,MAAOA,CAAAA,CAEV,CACD,MAAOyE,CAAAA,GAGIoC,CAAG,CAAG,CAAClD,CAAD,CAAMpC,CAAN,GAAe,CAChC,GAAIsD,CAAAA,CAAa,GAAjB,CACA,GAAIlB,CAAG,SAAP,CAAuB,MAAO,IAAQkB,CAAR,CAAP,CACvB,GAAI,CAACtD,CAAD,EAAyB,CAAhB,GAAAA,CAAI,CAACuB,MAAlB,CAAgC,MAAO,IAAQ+B,CAAR,CAAP,CAChCtD,CAAI,CAAG0C,CAAK,CAAC1C,CAAD,CAJoB,CAKhC,KAAM,CAACR,CAAD,CAAM,GAAG2D,CAAT,EAAsBnD,CAA5B,CACA,GAAoB,CAAhB,GAAAA,CAAI,CAACuB,MAAT,CAAuB,CACrB,GAAI7C,KAAK,CAACC,OAAN,CAAcyD,CAAd,GAAsB,CAACF,KAAK,CAAC1C,CAAD,CAAhC,CAAuC,CACrC,KAAM+F,CAAAA,CAAG,CAAGnD,CAAG,CAACb,MAAhB,CACAa,CAAG,CAACqC,MAAJ,CAAWjF,CAAX,CAAgB,CAAhB,CAFqC,CAGrC8D,CAAa,CAAGiC,CAAG,GAAKnD,CAAG,CAACb,MAC7B,CAJD,IAIWa,CAAAA,CAAG,CAAClB,cAAJ,CAAmB1B,CAAnB,CAJX,GAKE8D,CAAa,CAAG,MAAOlB,CAAAA,CAAG,CAAC5C,CAAD,CAL5B,EAOA,MAAO,IAAO8D,CAAP,CACR,CACC,MAAOgC,CAAAA,CAAG,CAAClD,CAAG,CAAC5C,CAAD,CAAJ,CAAW,CAAC,GAAG2D,CAAJ,CAAX,GAIDqC,CAAK,CAAG,CAACpD,CAAD,CAAMpC,CAAN,CAAYyF,CAAZ,GAAqB,CACxC/B,CAAY,CAACtB,CAAD,CAAMpC,CAAN,CAAYtB,KAAK,CAACC,OAAN,CAAc8G,CAAd,EAAsB,EAAtB,CAA2B,EAAvC,CAD4B,MAElCC,CAAAA,CAAO,CAAGzC,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAFqB,CAGlC2F,CAAM,CAAG3G,CAAS,CAAC0G,CAAD,CAAUD,CAAV,CAHgB,CAIxC,MAAOrC,CAAAA,CAAG,CAAChB,CAAD,CAAMpC,CAAN,CAAY2F,CAAZ,GAGCC,CAAO,CAAG,CAACxD,CAAD,CAAMpC,CAAN,CAAYyF,CAAZ,GAAqB,CAC1C,KAAMC,CAAAA,CAAO,CAAGzC,CAAG,CAACb,CAAD,CAAMpC,CAAN,CAAnB,CACA,MAAOmB,CAAAA,CAAK,CAACuE,CAAD,CAAUD,CAAV,CACb,ECxOD,KAAMI,CAAAA,CAAc,CAClBC,WAAW,CAAEC,CAAF,CAASC,CAAS,CAAG,GAArB,CAA0BC,CAA1B,CAAiCC,CAAjC,CAA+C,CACxD,KAAKH,KAAL,CAAaA,CAD2C,CAExD,KAAKC,SAAL,CAAiBA,CAFuC,CAGxD,KAAKC,KAAL,CAAaA,CAH2C,CAIxD,KAAKC,YAAL,CAAoBA,CAJoC,CAKxD,KAAKC,UAAL,CAAkB,EALsC,CAMxD,KAAKC,kBAAL,CAA0B,EAN8B,CAOxD,KAAKC,iBAAL,CAAyB,EAC1B,CAED,GAAIrG,CAAAA,IAAJ,EAAY,CACV,KAAM+F,CAAAA,CAAK,CAAG,KAAKA,KAAnB,CACA,GAAIrH,KAAK,CAACC,OAAN,CAAcoH,CAAd,CAAJ,CAA0B,MAAOA,CAAAA,CAAP,CAC1B,GAAI/F,CAAAA,CAAI,CAAG,EAAX,CACA,GAAqB,QAAjB,QAAO+F,CAAAA,CAAX,CACE/F,CAAI,CAAG,CAAC0C,CAAK,CAACqD,CAAD,CAAQ,KAAKC,SAAb,CAAN,CADT,KAEO,IAAyB,iBAArB,GAAAD,CAAK,CAAC5H,QAAN,EAAJ,CACL,IAAK,KAAMqB,CAAAA,CAAX,GAAkBuG,CAAAA,CAAlB,CACOA,CAAK,CAAC7E,cAAN,CAAqB1B,CAArB,CADP,EAEEQ,CAAI,CAACgD,IAAL,CAAUN,CAAK,CAACqD,CAAK,CAACvG,CAAD,CAAN,CAAa,KAAKwG,SAAlB,CAAf,CAFF,CADK,IAML,OAAOD,CAAAA,CAAP,CAEF,MAAO/F,CAAAA,CACR,CAEDsG,OAAO,CAAEC,CAAF,CAAS,CACd,GAA+B,CAA3B,QAAKJ,UAAL,CAAgB5E,MAAhB,EAAgC,CAACgF,CAArC,CAA4C,OAC5C,GAAI,KAAKC,cAAT,CAAyB,OAFX,KAIRC,CAAAA,CAAQ,CAAG,KAAKP,YAJR,CAKRlG,CAAI,CAAG,KAAKA,IALJ,CAMR0G,CAAQ,CAAG,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CANH,CAOd,KAAKC,kBAAL,CAA0BJ,CAAQ,CAACK,cAAT,CAAwB9G,CAAxB,CAA8B0G,CAA9B,CAC3B,CAEDK,SAAS,EAAI,CACN,KAAKF,kBADC,GAEX,KAAKA,kBAAL,EAFW,CAGX,MAAO,MAAKA,kBAHD,CAIZ,CAEDG,aAAa,CAAEC,CAAF,CAAaC,CAAb,CAAwB,CACnC,GAAIxI,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAAJ,CAA8B,MAAO,IAAM,CAAE,CAAf,CAC9B,KAAME,CAAAA,CAAoB,CAAGF,CAAS,CAACE,oBAAvC,CACAF,CAAS,CAACE,oBAAV,CAAiC,IAAM,CACrCD,CAAS,EAD4B,CAEI,UAArC,QAAO,MAAKC,oBAFqB,EAGnC,KAAKA,oBAAL,CAA0B/I,IAA1B,CAA+B6I,CAA/B,EAN+B,CASnCA,CAAS,CAACE,oBAAV,CAA+BC,UAA/B,CAA4CD,CAC7C,CAEDE,eAAe,CAAEJ,CAAF,CAAa,CAC1B,KAAME,CAAAA,CAAoB,CAAGF,CAAS,CAACE,oBAAvC,CACA,GAAKA,CAAL,EACA,KAAMG,CAAAA,CAAQ,CAAGL,CAAS,CAACE,oBAAV,CAA+BC,UAAhD,CACKE,CAFL,GAGAL,CAAS,CAACE,oBAAV,CAAiCG,CAHjC,EAID,CAEDC,eAAe,CAAEC,CAAF,CAAQ,OACD,UAAhB,QAAOA,CAAAA,CADU,EAEnB,KAAKnB,iBAAL,CAAuBrD,IAAvB,CAA4BwE,CAA5B,CAFmB,CAGnB,KAAKb,gBAAL,EAHmB,CAIZ,IAAM,CACX,KAAMc,CAAAA,CAAG,CAAG,KAAKpB,iBAAL,CAAuBtC,OAAvB,CAA+ByD,CAA/B,CAAZ,CACU,CAAC,CAAP,CAAAC,CAFO,EAEG,KAAKpB,iBAAL,CAAuB5B,MAAvB,CAA8BgD,CAA9B,CAAmC,CAAnC,CACf,CAPkB,EASd,IAAM,CAAE,CAChB,CAED,GAAIC,CAAAA,gBAAJ,EAAwB,CACtB,MAAO,MAAKrB,iBAAL,CAAuB3B,KAAvB,CAA6B,CAA7B,CACR,CAEDiD,qBAAqB,CAAElC,CAAF,CAAQ,CAQ3B,MAPA,MAAKY,iBAAL,CAAuBlG,OAAvB,CAAgCqH,CAAD,EAAU,CACvC,GAAI,CACF/B,CAAI,CAAG+B,CAAI,CAAC/B,CAAD,CACZ,CAAC,MAAOvB,CAAP,CAAW,CACX0D,OAAO,CAACC,GAAR,CAAYL,CAAZ,CAAkB,sBAAlB,CAA0C/B,CAA1C,CACD,CACF,CAND,CAOA,CAAOA,CACR,CAEDqC,UAAU,EAAI,IACRrC,CAAAA,CAAI,CAAG,EADC,CAERM,CAAK,CAAG,KAAKA,KAFL,CAIZ,GAAqB,QAAjB,QAAOA,CAAAA,CAAX,CACEA,CAAK,CAAGrD,CAAK,CAACqD,CAAD,CAAQ,KAAKC,SAAb,CADf,CAEEP,CAAI,CAAG,KAAKQ,KAAL,CAAWhD,GAAX,CAAe8C,CAAf,CAFT,KAGO,IAAIrH,KAAK,CAACC,OAAN,CAAcoH,CAAd,CAAJ,CACLN,CAAI,CAAGM,CAAK,CAAC1G,GAAN,CAAWsD,CAAD,EAAU,CACzB,KAAMnD,CAAAA,CAAG,CAAGkD,CAAK,CAACC,CAAD,CAAO,KAAKqD,SAAZ,CAAjB,CACA,MAAO,MAAKC,KAAL,CAAWhD,GAAX,CAAezD,CAAf,CACR,CAHM,CADF,KAML,KAAK,KAAMA,CAAAA,CAAX,GAAkBuG,CAAAA,CAAlB,CAAyB,CACvB,KAAMpD,CAAAA,CAAI,CAAGD,CAAK,CAACqD,CAAK,CAACvG,CAAD,CAAN,CAAa,KAAKwG,SAAlB,CAAlB,CACAP,CAAI,CAACjG,CAAD,CAAJ,CAAY,KAAKyG,KAAL,CAAWhD,GAAX,CAAeN,CAAf,CACb,CAGH8C,CAAI,CAAG,KAAKkC,qBAAL,CAA2BlC,CAA3B,CAnBK,CAqBQ,QAAhB,QAAOA,CAAAA,CArBC,GAsBVA,CAAI,CAAGnD,CAAY,CAACtD,CAAS,CAAC,EAAD,CAAKyG,CAAL,CAAV,CAtBT,EAyBZ,KAAKsC,KAAL,CAAatC,CACd,CAED,GAAIA,CAAAA,IAAJ,EAAY,CAIV,MAHK,MAAKsC,KAGV,EAFE,KAAKD,UAAL,EAEF,CAAO,KAAKC,KACb,CAEDpB,gBAAgB,EAAI,CAClB,KAAKmB,UAAL,EADkB,CAElB,KAAK3B,UAAL,CAAgBhG,OAAhB,CAAyB8G,CAAD,EAAe,CACrC,KAAKe,WAAL,CAAiBf,CAAjB,CACD,CAFD,CAFkB,CAKlB,KAAKgB,kBAAL,EACD,CAEDC,aAAa,CAAEjB,CAAF,CAAakB,CAAb,CAAgC,CAC3C,GAAIC,CAAAA,CAAJ,CAIA,GAHI1J,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAGJ,GAFEmB,CAAQ,CAAGnB,CAAS,CAAC,CAAD,CAEtB,GAAI,CAACmB,CAAL,SACID,CADJ,GAEAlB,CAAS,CAAC,CAAD,CAAT,CAAe,KAAKc,KAFpB,CAGAK,CAAQ,CAAC,KAAKL,KAAN,CAHR,IAKD,CAEDM,aAAa,CAAEpB,CAAF,CAAakB,CAAb,CAAgC,CAC3C,GAAkC,UAA9B,QAAOlB,CAAAA,CAAS,CAACmB,QAArB,CAiBA,MAhBID,CAAAA,CAgBJ,EAfElB,CAAS,CAACqB,KAAV,CAAkBrB,CAAS,CAACqB,KAAV,EAAmB,EAevC,CAdErB,CAAS,CAACqB,KAAV,CAAgBrC,KAAhB,CAAwBgB,CAAS,CAACqB,KAAV,CAAgBrC,KAAhB,EAAyB,EAcnD,CAbEgB,CAAS,CAACqB,KAAV,CAAgBrC,KAAhB,CAAwB,CACtB,GAAGgB,CAAS,CAACqB,KAAV,CAAgBrC,KADG,CAEtB,GAAG,KAAKR,IAFc,CAa1B,EAREwB,CAAS,CAACmB,QAAV,CAAmB,CACjB,GAAGnB,CAAS,CAACqB,KADI,CAEjBrC,KAAK,CAAE,CACL,GAAGgB,CAAS,CAACqB,KAAV,CAAgBrC,KADd,CAEL,GAAG,KAAKR,IAFH,CAFU,CAAnB,CAQF,GACD,CAED8C,iBAAiB,CAAEtB,CAAF,CAAa,CACH,QAArB,QAAOA,CAAAA,CADiB,GAE1BA,CAAS,CAACxB,IAAV,CAAiB,KAAKA,IAFI,CAI7B,CAEDuC,WAAW,CAAEf,CAAF,CAAauB,CAAO,GAApB,CAA8B,MACjCC,CAAAA,CAAS,CAAG,KAAKP,aAAL,CAAmBjB,CAAnB,CAA8BuB,CAA9B,CADqB,CAEjCE,CAAS,CAAG,KAAKL,aAAL,CAAmBpB,CAAnB,CAA8BuB,CAA9B,CAFqB,CAGlCC,CAAD,EAAeC,CAHoB,EAIrC,KAAKH,iBAAL,CAAuBtB,CAAvB,CAAkCuB,CAAlC,CAEH,CAEDG,QAAQ,CAAEnB,CAAF,CAAQ,OACM,UAAhB,QAAOA,CAAAA,CADG,EAEZ,KAAKpB,kBAAL,CAAwBpD,IAAxB,CAA6BwE,CAA7B,CAFY,CAGL,IAAM,CACX,KAAMC,CAAAA,CAAG,CAAG,KAAKrB,kBAAL,CAAwBrC,OAAxB,CAAgCyD,CAAhC,CAAZ,CACU,CAAC,CAAP,CAAAC,CAFO,EAEG,KAAKrB,kBAAL,CAAwB3B,MAAxB,CAA+BgD,CAA/B,CAAoC,CAApC,CACf,CANW,EAQP,IAAM,CAAE,CAChB,CAED,GAAImB,CAAAA,iBAAJ,EAAyB,CACvB,MAAO,MAAKxC,kBAAL,CAAwB1B,KAAxB,CAA8B,CAA9B,CACR,CAEDuD,kBAAkB,EAAI,CACpB,KAAK7B,kBAAL,CAAwBjG,OAAxB,CAAiCqH,CAAD,EAAU,CACxC,GAAI,CACFA,CAAI,CAAC,KAAK/B,IAAN,CACL,CAAC,MAAOvB,CAAP,CAAW,CACX0D,OAAO,CAACC,GAAR,CAAY3D,CAAZ,CACD,CACF,CAND,CAOD,CAED,GAAI2E,CAAAA,eAAJ,EAAuB,CACrB,MAAO,CAAC,CAAC,KAAKhC,kBACf,CAEDiC,OAAO,CAAE7B,CAAF,CAAa8B,CAAb,CAAmB,CACxB,GAAIC,CAAAA,CAAI,CAAG/B,CAAX,CACIvI,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAFoB,GAGtB+B,CAAI,CAAG/B,CAAS,CAAC,CAAD,CAHM,EAKxB+B,CAAI,CAACC,SAAL,CAAiBF,CAClB,CAEDG,UAAU,CAAEjC,CAAF,CAAa,CACrB,GAAI+B,CAAAA,CAAI,CAAG/B,CAAX,CACIvI,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAFiB,GAGnB+B,CAAI,CAAG/B,CAAS,CAAC,CAAD,CAHG,EAKrB,MAAO+B,CAAAA,CAAI,CAACC,SACb,CAhOiB,CCApB,KAAME,CAAAA,CAAQ,CACZrD,WAAW,CAAEC,CAAF,CAASqD,CAAT,CAAapD,CAAb,CAAwBC,CAAxB,CAA+BC,CAA/B,CAA6C,CACtD,KAAKkD,EAAL,CAAUA,CAAE,EAAIC,CAAU,EAD4B,CAEtD,KAAKtD,KAAL,CAAaA,CAFyC,CAItD,KAAKuD,OAAL,CAAe,GAAIzD,CAAAA,CAAJ,CAAkBE,CAAlB,CAAyBC,CAAzB,CAAoCC,CAApC,CAA2CC,CAA3C,CAJuC,CAMtD,KAAKF,SAAL,CAAiBA,CANqC,CAOtD,KAAKC,KAAL,CAAaA,CAPyC,CAQtD,KAAKC,YAAL,CAAoBA,CACrB,CAEDqD,aAAa,CAAEC,CAAF,CAAU,CACrB,GAAI,CAAC,KAAKF,OAAV,CAAmB,MAAO,CAAC,CAAR,CACf5K,KAAK,CAACC,OAAN,CAAc6K,CAAd,CAFiB,GAGnBA,CAAM,CAAGA,CAAM,CAAC,CAAD,CAHI,EAKrB,KAAMrD,CAAAA,CAAU,CAAG,KAAKmD,OAAL,CAAanD,UAAhC,CACA,IAAK,GACCc,CAAAA,CADD,CAAI3F,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG6E,CAAU,CAAC5E,MAA/B,CAAuCD,CAAC,EAAxC,CAKE,GAJI2F,CAIJ,CAJgBd,CAAU,CAAC7E,CAAD,CAI1B,CAHI5C,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAGJ,GAFEA,CAAS,CAAGA,CAAS,CAAC,CAAD,CAEvB,EAAIuC,CAAM,GAAKvC,CAAf,CACE,MAAO3F,CAAAA,CAAP,CAGJ,MAAO,CAAC,CACT,CAED,GAAImE,CAAAA,IAAJ,EAAY,OACL,MAAK6D,OADA,CAEH,KAAKA,OAAL,CAAa7D,IAFV,CACgB,EAE3B,CAED,GAAIU,CAAAA,UAAJ,EAAkB,OACX,MAAKmD,OADM,CAET,KAAKA,OAAL,CAAanD,UAAb,CAAwBzB,KAAxB,CAA8B,CAA9B,CAFS,CACU,EAE3B,CAED,GAAI+E,CAAAA,MAAJ,EAAc,SACP,KAAKH,OADE,EAEL,KAAKA,OAAL,CAAaT,eACrB,CAED,GAAID,CAAAA,iBAAJ,EAAyB,OAClB,MAAKU,OADa,CAEhB,KAAKA,OAAL,CAAaV,iBAFG,CACG,EAE3B,CAED,GAAIlB,CAAAA,gBAAJ,EAAwB,OACjB,MAAK4B,OADY,CAEf,KAAKA,OAAL,CAAa5B,gBAFE,CACI,EAE3B,CAEDgC,IAAI,CAAEzC,CAAF,CAAa,CACf,GAAI,CAACA,CAAL,CAAgB,MAAO,EAAP,CAChB,KAAM0C,CAAAA,CAAM,CAAG,KAAKL,OAApB,CACA,GAAI,CAACK,CAAL,CAAa,MAAO,EAAP,CAHE,KAIT1D,CAAAA,CAAK,CAAG,KAAKA,KAJJ,CAKT2D,CAAM,CAAG3D,CAAK,CAAC4D,+BAAN,CAAsCjD,IAAtC,CAA2CX,CAA3C,CAAkDgB,CAAlD,CALA,CAMTtC,CAAM,CAAG,CAAC,KAAKc,IAAN,CAAYmE,CAAZ,CANA,OAOqB,CAAC,CAAjC,MAAKL,aAAL,CAAmBtC,CAAnB,CAPW,CAOgCtC,CAPhC,EAQfgF,CAAM,CAACxD,UAAP,CAAkBnD,IAAlB,CAAuBiE,CAAvB,CARe,CASf0C,CAAM,CAACrD,OAAP,CAAe,KAAKwD,WAApB,CATe,CAUfH,CAAM,CAACb,OAAP,CAAe7B,CAAf,CAA0B,IAA1B,CAVe,CAWf0C,CAAM,CAAC3C,aAAP,CAAqBC,CAArB,CAAgC2C,CAAhC,CAXe,CAYfD,CAAM,CAAC3B,WAAP,CAAmBf,CAAnB,IAZe,CAaRtC,CAbQ,CAchB,CAEDiF,MAAM,CAAE3C,CAAF,CAAa,CACjB,GAAI,CAACA,CAAL,CAAgB,SAChB,KAAM0C,CAAAA,CAAM,CAAG,KAAKL,OAApB,CACA,GAAI,CAACK,CAAL,CAAa,SACb,KAAMlC,CAAAA,CAAG,CAAG,KAAK8B,aAAL,CAAmBtC,CAAnB,CAAZ,CASA,MARU,CAAC,CAAP,CAAAQ,CAQJ,GAPEkC,CAAM,CAACT,UAAP,CAAkBjC,CAAlB,CAOF,CANE0C,CAAM,CAACxD,UAAP,CAAkB1B,MAAlB,CAAyBgD,CAAzB,CAA8B,CAA9B,CAMF,CALEkC,CAAM,CAACtC,eAAP,CAAuBJ,CAAvB,CAKF,EAHkC,CAA7B,GAAA0C,CAAM,CAACxD,UAAP,CAAkB5E,MAAnB,EAAqC,KAAKuI,WAG9C,EAFEH,CAAM,CAAC5C,SAAP,EAEF,CAAa,CAAC,CAAP,CAAAU,CACR,CAEDsC,IAAI,CAAEC,CAAE,GAAJ,CAAa,SACV,KAAKV,OADK,GAEf,KAAKQ,WAAL,CAAmBE,CAFJ,CAGXA,CAAE,EAAI,CAAC,KAAKP,MAHD,EAIb,KAAKH,OAAL,CAAahD,OAAb,IAJa,CAMX,CAAC0D,CAAD,EAAO,KAAKP,MAND,EAOb,KAAKH,OAAL,CAAavC,SAAb,EAPa,IAUhB,CAEDkD,SAAS,EAAI,SACN,KAAKX,OADC,GAEX,KAAKA,OAAL,CAAanD,UAAb,CAAwBhG,OAAxB,CAAgC,KAAKyJ,MAAL,CAAYhD,IAAZ,CAAiB,IAAjB,CAAhC,CAFW,IAIZ,CAED+B,QAAQ,CAAEnB,CAAF,CAAQ,OACT,MAAK8B,OADI,CAEP,KAAKA,OAAL,CAAaX,QAAb,CAAsBnB,CAAtB,CAFO,CACY,IAAM,CAAE,CAEnC,CAEDD,eAAe,CAAEC,CAAF,CAAQ,OAChB,MAAK8B,OADW,CAEd,KAAKA,OAAL,CAAa/B,eAAb,CAA6BC,CAA7B,CAFc,CACK,IAAM,CAAE,CAEnC,CAED0C,QAAQ,EAAI,QACL,KAAKZ,OADA,GAEV,KAAKW,SAAL,EAFU,CAGV,KAAKX,OAAL,CAAavC,SAAb,EAHU,CAIV,MAAO,MAAKuC,OAJF,CAKV,MAAO,MAAKpD,YALF,CAMV,KAAKD,KAAL,CAAWkE,aAAX,CAAyB,IAAzB,CANU,IAQX,CA3HW,CCFd,KAAMC,CAAAA,CAAa,CACjBtE,WAAW,CAAEG,CAAF,CAAS,CAClB,KAAKA,KAAL,CAAaA,CADK,CAElB,KAAKoE,SAAL,CAAiB,EAFC,CAGlB,KAAK9M,OAAL,CAAe,CAChB,CAEDuJ,cAAc,CAAE9G,CAAF,CAAQ0G,CAAR,CAAkB,CAC9B,GAAI,CAACA,CAAL,CAAe,OACf,GAAI,CAAC1G,CAAD,EAAyB,CAAhB,GAAAA,CAAI,CAACuB,MAAlB,CAAgC,OAChC,EAAE,KAAKhE,OAHuB,CAI9B,KAAM6L,CAAAA,CAAE,CAAI,cAAa,KAAK7L,OAAQ,EAAtC,CAKA,MAJA,MAAK8M,SAAL,CAAejB,CAAf,EAAqB,CACnBpJ,IAAI,CAAJA,CADmB,CAEnB0G,QAAQ,CAARA,CAFmB,CAIrB,CAAO,IAAM,CACX,MAAO,MAAK2D,SAAL,CAAejB,CAAf,CACR,CACF,CAEDkB,aAAa,CAAEC,CAAF,CAAc,MAEnBC,CAAAA,CAAO,CAAG,EAFS,CAGnBC,CAAW,CAAG/H,CAAK,CAAC6H,CAAD,CAAL,CAAkBG,IAAlB,MAHK,CAIzB,IAAK,KAAMtB,CAAAA,CAAX,GAAiB,MAAKiB,SAAtB,CAAiC,CAC/B,GAAI,CAAErK,IAAI,CAAJA,CAAF,CAAQ0G,QAAQ,CAARA,CAAR,EAAqB,KAAK2D,SAAL,CAAejB,CAAf,CAAzB,CACApJ,CAAI,CAAGA,CAAI,CAACJ,MAAL,CAAaJ,CAAD,EAAS,CAC1B,KAAMmL,CAAAA,CAAO,CAAGjI,CAAK,CAAClD,CAAD,CAAL,CAAWkL,IAAX,CANF,IAME,CAAhB,CACA,MAAOC,CAAAA,CAAO,CAACC,UAAR,CAAmBH,CAAnB,GAAmCA,CAAW,CAACG,UAAZ,CAAuBD,CAAvB,CAC3C,CAHM,CAFwB,CAMb,CAAd,CAAA3K,CAAI,CAACuB,MANsB,EAMViJ,CAAO,CAACxH,IAAR,CAAa,CAAChD,CAAD,CAAO0G,CAAP,CAAb,CACtB,CACD8D,CAAO,CAACrK,OAAR,CAAgB,CAAC,CAACH,CAAD,CAAO0G,CAAP,CAAD,GAAsB,CACpC,GAAI,CACFA,CAAQ,CAAC1G,CAAD,CACT,CAAC,MAAOkE,CAAP,CAAW,CACX0D,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BnB,CAA9B,CAAwC1G,CAAxC,CACD,CACF,CAND,CAOD,CAEDkK,QAAQ,EAAI,CACV,KAAKG,SAAL,CAAiB,EAClB,CA5CgB,UCGZ,KAAa,CAClBvE,WAAW,CAAEL,CAAF,CAAQ,CACjB,KAAKA,IAAL,CAAYA,CADK,CAEjB,KAAKoF,QAAL,CAAgB,EAFC,CAGjB,KAAK3E,YAAL,CAAoB,GAAIkE,CAAAA,CAAJ,CAAiB,IAAjB,CAHH,CAIjB,KAAKpE,SAAL,CAAiB,GAJA,CAKjB,KAAK8E,cAAL,CAAsB,EACvB,CAEDC,aAAa,CAAEvL,CAAF,CAAO,CAClB,KAAK0G,YAAL,CAAkBoE,aAAlB,CAAgC9K,CAAhC,CACD,CAEDwL,WAAW,CAAExL,CAAF,CAAO,CAACyL,CAAD,CAASC,CAAT,CAAkBpN,CAAlB,CAAP,CAAiC,CAK1C,MAJIoN,CAAAA,CAIJ,EAHE,KAAKH,aAAL,CAAmBvL,CAAnB,CAGF,CADA,KAAK2L,qBAAL,CAA2BD,CAA3B,CAAoC1L,CAApC,CACA,CAAOyL,CACR,CAEDhI,GAAG,CAAEzD,CAAF,CAAO0D,CAAP,CAAqB,CACtB,MAAOD,CAAAA,CAAG,CAAC,KAAKwC,IAAN,CAAYjG,CAAZ,CAAiB0D,CAAjB,CACX,CAEDE,GAAG,CAAE5D,CAAF,CAAO1B,CAAP,CAAcsN,CAAY,GAA1B,CAAoC,CACrC,MAAO,MAAKJ,WAAL,CAAiBxL,CAAjB,CAAsB4D,CAAG,CAAC,KAAKqC,IAAN,CAAYjG,CAAZ,CAAiB1B,CAAjB,CAAwBsN,CAAxB,CAAzB,CACR,CAEDhG,QAAQ,CAAEpF,CAAF,CAAQkD,CAAR,CAAsB,CAC5B,MAAOkC,CAAAA,CAAQ,CAAC,KAAKK,IAAN,CAAYzF,CAAZ,CAAkBkD,CAAlB,CAChB,CAEDgC,KAAK,CAAE1F,CAAF,CAAO,CACV,MAAO,MAAKwL,WAAL,CAAiBxL,CAAjB,CAAsB0F,CAAK,CAAC,KAAKO,IAAN,CAAYjG,CAAZ,CAA3B,CACR,CAED4E,MAAM,CAAE5E,CAAF,CAAO1B,CAAP,CAAcuN,CAAd,CAAwB,CAC5B,MAAO,MAAKL,WAAL,CAAiBxL,CAAjB,CAAsB4E,CAAM,CAAC,KAAKqB,IAAN,CAAYjG,CAAZ,CAAiB1B,CAAjB,CAAwBuN,CAAxB,CAA5B,CACR,CAEDrI,IAAI,CAAExD,CAAF,CAAO,GAAG2E,CAAV,CAAkB,CACpB,MAAO,MAAK6G,WAAL,CAAiBxL,CAAjB,CAAsBwD,CAAI,CAAC,KAAKyC,IAAN,CAAYjG,CAAZ,CAAiB,GAAG2E,CAApB,CAA1B,CACR,CAEDG,OAAO,CAAE9E,CAAF,CAAO,GAAG2E,CAAV,CAAkB,CACvB,MAAO,MAAK6G,WAAL,CAAiBxL,CAAjB,CAAsB8E,CAAO,CAAC,KAAKmB,IAAN,CAAYjG,CAAZ,CAAiB,GAAG2E,CAApB,CAA7B,CACR,CAEDI,GAAG,CAAE/E,CAAF,CAAO,CACR,MAAO,MAAKwL,WAAL,CAAiBxL,CAAjB,CAAsB+E,CAAG,CAAC,KAAKkB,IAAN,CAAYjG,CAAZ,CAAzB,CACR,CAEDgF,KAAK,CAAEhF,CAAF,CAAO,CACV,MAAO,MAAKwL,WAAL,CAAiBxL,CAAjB,CAAsBgF,CAAK,CAAC,KAAKiB,IAAN,CAAYjG,CAAZ,CAA3B,CACR,CAEDiF,MAAM,CAAEjF,CAAF,CAAO,GAAGsE,CAAV,CAAgB,CACpB,MAAO,MAAKkH,WAAL,CAAiBxL,CAAjB,CAAsBiF,CAAM,CAAC,KAAKgB,IAAN,CAAYjG,CAAZ,CAAiB,GAAGsE,CAApB,CAA5B,CACR,CAEDY,KAAK,CAAElF,CAAF,CAAO,GAAGsE,CAAV,CAAgB,CACnB,MAAOY,CAAAA,CAAK,CAAC,KAAKe,IAAN,CAAYjG,CAAZ,CAAiB,GAAGsE,CAApB,CACb,CAEDc,IAAI,CAAEpF,CAAF,CAAO,GAAGsE,CAAV,CAAgB,CAClB,MAAO,MAAKkH,WAAL,CAAiBxL,CAAjB,CAAsBoF,CAAI,CAAC,KAAKa,IAAN,CAAYjG,CAAZ,CAAiB,GAAGsE,CAApB,CAA1B,CACR,CAEDJ,YAAY,CAAElE,CAAF,CAAO0D,CAAP,CAAqB,CAC/B,MAAO,MAAK8H,WAAL,CAAiBxL,CAAjB,CAAsBkE,CAAY,CAAC,KAAK+B,IAAN,CAAYjG,CAAZ,CAAiB0D,CAAjB,CAAlC,CACR,CAEDoI,MAAM,CAAE9L,CAAF,CAAO,CACX,MAAO,MAAKwL,WAAL,CAAiBxL,CAAjB,CAAsB8F,CAAG,CAAC,KAAKG,IAAN,CAAYjG,CAAZ,CAAzB,CACR,CAEDiE,GAAG,CAAEjE,CAAF,CAAO,CACR,MAAOiE,CAAAA,CAAG,CAAC,KAAKgC,IAAN,CAAYjG,CAAZ,CACX,CAEDgG,KAAK,CAAEhG,CAAF,CAAOiG,CAAP,CAAa,CAChB,MAAO,MAAKuF,WAAL,CAAiBxL,CAAjB,CAAsBgG,CAAK,CAAC,KAAKC,IAAN,CAAYjG,CAAZ,CAAiBiG,CAAjB,CAA3B,CACR,CAEDZ,SAAS,CAAErF,CAAF,CAAOsF,CAAP,CAAW,CAClB,MAAO,MAAKkG,WAAL,CAAiBxL,CAAjB,CAAsBqF,CAAS,CAAC,KAAKY,IAAN,CAAYjG,CAAZ,CAAiBsF,CAAjB,CAA/B,CACR,CAEDC,SAAS,CAAEvF,CAAF,CAAOsF,CAAP,CAAW,CAClB,MAAO,MAAKkG,WAAL,CAAiBxL,CAAjB,CAAsBuF,CAAS,CAAC,KAAKU,IAAN,CAAYjG,CAAZ,CAAiBsF,CAAjB,CAA/B,CACR,CAEDE,MAAM,CAAExF,CAAF,CAAO,CACX,MAAO,MAAKwL,WAAL,CAAiBxL,CAAjB,CAAsBwF,CAAM,CAAC,KAAKS,IAAN,CAAYjG,CAAZ,CAA5B,CACR,CAEDoG,OAAO,CAAEpG,CAAF,CAAO1B,CAAP,CAAc,CACnB,MAAO8H,CAAAA,CAAO,CAAC,KAAKH,IAAN,CAAYjG,CAAZ,CAAiB1B,CAAjB,CACf,CAEDiI,KAAK,CAAE/F,CAAF,CAAQoJ,CAAR,CAAY,CACf,KAAMmC,CAAAA,CAAO,CAAG,GAAIpC,CAAAA,CAAJ,CAAYnJ,CAAZ,CAAkBoJ,CAAlB,CAAsB,KAAKpD,SAA3B,CAAsC,IAAtC,CAA4C,KAAKE,YAAjD,CAAhB,CAEA,MADA,MAAK2E,QAAL,CAAc7H,IAAd,CAAmBuI,CAAnB,CACA,CAAOA,CACR,CAED3E,IAAI,CAAE/H,CAAO,CAAG,EAAZ,CAAgB,CAClB,KAAM,CAAE2M,EAAE,CAAFA,CAAF,CAAMC,WAAW,CAAXA,CAAN,CAAmBrC,EAAE,CAAFA,CAAnB,CAAuBrD,KAAK,CAALA,CAAvB,CAA8BwB,eAAe,CAAfA,CAA9B,EAAkD1I,CAAxD,CACA,GAAIoI,CAAAA,CAAS,CAAGuE,CAAhB,CACI9M,KAAK,CAACC,OAAN,CAAcsI,CAAd,CAHc,GAIhBA,CAAS,CAAGuE,CAAE,CAAC,CAAD,CAJE,EAMlB,GAAID,CAAAA,CAAJ,CAEA,GADAA,CAAO,CAAGtE,CAAS,CAACgC,SACpB,CAAIsC,CAAJ,CACE,MAAOA,CAAAA,CAAO,CAAC7B,IAAR,CAAa8B,CAAb,CAAP,CAEFD,CAAO,CAAG,KAAKxF,KAAL,CAAWA,CAAX,CAAkBqD,CAAlB,CAAsB,KAAKpD,SAA3B,CAXQ,CAYlBuF,CAAO,CAAC5C,QAAR,CAAiB8C,CAAjB,CAZkB,CAalBF,CAAO,CAAChE,eAAR,CAAwBA,CAAxB,CAbkB,CAclB,KAAMmC,CAAAA,CAAI,CAAG6B,CAAO,CAAC7B,IAAR,CAAa8B,CAAb,CAAb,CAdkB,MAgBd9M,CAAAA,KAAK,CAACC,OAAN,CAAc6M,CAAd,CAhBc,CAiBT9B,CAjBS,CAmBX6B,CACR,CAEDpB,aAAa,CAAEoB,CAAF,CAAW,CACtB,KAAMG,CAAAA,CAAK,CAAG,KAAKb,QAAL,CAAc9G,OAAd,CAAsBwH,CAAtB,CAAd,CADsB,SAEV,CAAC,CAAT,CAAAG,CAFkB,IAGpBH,CAAO,CAACrB,QAAR,EAHoB,CAIpB,KAAKW,QAAL,CAAcpG,MAAd,CAAqBiH,CAArB,CAA4B,CAA5B,CAJoB,IAQvB,CAED/C,QAAQ,CAAEnB,CAAF,CAAQ,OACM,UAAhB,QAAOA,CAAAA,CADG,EAEZ,KAAKsD,cAAL,CAAoB9H,IAApB,CAAyBwE,CAAzB,CAFY,CAGL,IAAM,CACX,KAAMC,CAAAA,CAAG,CAAG,KAAKqD,cAAL,CAAoB/G,OAApB,CAA4ByD,CAA5B,CAAZ,CACU,CAAC,CAAP,CAAAC,CAFO,EAEG,KAAKqD,cAAL,CAAoBrG,MAApB,CAA2BgD,CAA3B,CAAgC,CAAhC,CACf,CANW,EAQP,IAAM,CAAE,CAChB,CAED0D,qBAAqB,CAAED,CAAF,CAAWS,CAAX,CAAwB,CAC3C,KAAKb,cAAL,CAAoB3K,OAApB,CAA6BqH,CAAD,EAAU,CACpC,GAAI,CACFA,CAAI,CAAC0D,CAAD,CAAUS,CAAV,CAAuB,KAAKlG,IAA5B,CAAkC,IAAlC,CACL,CAAC,MAAOvB,CAAP,CAAW,CACX0D,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBL,CAAxB,CAA8BmE,CAA9B,CACD,CACF,CAND,CAOD,CAED9B,+BAA+B,CAAE5C,CAAF,CAAa,CAC1C,KAAK4D,QAAL,CAAc1K,OAAd,CAAuBoL,CAAD,EAAa,CACjCA,CAAO,CAAC3B,MAAR,CAAe3C,CAAf,CACD,CAFD,CAGD,CAEDiD,QAAQ,EAAI,CAOV,MANA,MAAKW,QAAL,CAAc1K,OAAd,CAAuBoL,CAAD,EAAa,CACjCA,CAAO,CAACrB,QAAR,EACD,CAFD,CAMA,CAHA,KAAKhE,YAAL,CAAkBgE,QAAlB,EAGA,CAFA,MAAO,MAAKhE,YAEZ,CADA,KAAKT,IAAL,CAAY,EACZ,GACD,CA9KiB"}